<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <?!= include('Styles'); ?>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  </head>
  <body>
    <div class="sidebar-wrapper">
      <header><h2>Data Prep Engine</h2><p class="subtitle">1. Define Schema & Scan</p></header>
      <div class="schema-box card">
        <div class="controls"><button class="mini-btn" onclick="toggleAllSchema(true)">All</button><button class="mini-btn" onclick="toggleAllSchema(false)">None</button></div>
        <div id="schema-list" class="scroll-box"></div>
        <button id="scan-btn" class="primary-btn" onclick="runInitialScan()">ğŸ” Validate & Scan</button>
      </div>
      <div id="scan-status" class="status-indicator">Select variables to begin.</div>
      <hr>
      <main>
        <details id="mod-dates" class="module-card disabled-module">
          <summary>ğŸ“… Date Formatting <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-dates" class="variable-config-container"></div>
            <button id="date-apply-btn" class="secondary-btn" disabled onclick="runDateFix()">Apply Transformation</button>
          </div>
        </details>
        <details id="mod-scaling" class="module-card disabled-module">
          <summary>âš–ï¸ Scaling & Outliers <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-outliers" class="variable-config-container"></div>
            <button id="scaling-apply-btn" class="secondary-btn" disabled onclick="runScalingFix()">Apply Scaling</button>
          </div>
        </details>
        <details id="mod-missing" class="module-card disabled-module">
          <summary>ğŸ©¹ Missing Values <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-missing" class="variable-config-container"></div>
            <button id="missing-apply-btn" class="secondary-btn" disabled onclick="runMissingFix()">Apply Imputation</button>
          </div>
        </details>
        <details id="mod-cleanup" class="module-card disabled-module">
          <summary>ğŸ§¹ Structural Cleanup <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-cleanup" class="variable-config-container"></div>
            <button id="cleanup-apply-btn" class="secondary-btn" onclick="runCleanupFix()">Apply Cleanup</button>
          </div>
        </details>
        <details id="mod-encoding" class="module-card disabled-module">
          <summary>ğŸ”¢ Categorical Encoding <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-encoding" class="variable-config-container"></div>
            <button id="encoding-apply-btn" class="secondary-btn" disabled onclick="runEncodingFix()">Apply Encoding</button>
          </div>
        </details>
      </main>
      <footer><div id="log-console">Ready.</div></footer>
    </div>
    <?!= include('Scripts'); ?>
  </body>
</html>
