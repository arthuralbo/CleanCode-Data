<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <?!= include('Styles'); ?>
  </head>
  <body>
    <div class="sidebar-wrapper">
      <header>
        <h2>Start your Data Preparation</h2>
        <p class="subtitle">1. Define Schema & Scan</p>
      </header>

      <div class="card">
        <div class="controls">
          <button class="mini-btn" onclick="toggleAllSchema(true)">All</button>
          <button class="mini-btn" onclick="toggleAllSchema(false)">None</button>
        </div>
        
        <p class="instruction" style="margin-top:0;">- Select variables and verify their data types:</p>
        
        <div id="schema-list" class="scroll-box"></div>
        
        <button id="scan-btn" class="primary-btn" onclick="runInitialScan()">ğŸ” Validate & Scan Data</button>
        
        <div id="scan-status">Ready.</div>
      </div>

      <p class="subtitle" style="margin-bottom: 8px;">2. Fix issues (Apply one section at a time)</p>
      <p style="font-size: 10px; color: var(--text-mute); margin: -4px 0 10px 4px;">
        ğŸ’¡ Apply a transformation, then re-scan to update the results.
      </p>

      <main>
        <details id="mod-dates" class="module-card disabled-module">
          <summary>ğŸ“… Date Formatting <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-dates" class="variable-config-container"></div>
            <button id="date-apply-btn" class="secondary-btn" disabled onclick="runDateFix()">Apply Transformation</button>
          </div>
        </details>

        <details id="mod-scaling" class="module-card disabled-module">
          <summary>âš–ï¸ Scaling & Outliers <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-outliers" class="variable-config-container"></div>
            <button id="scaling-apply-btn" class="secondary-btn" disabled onclick="runScalingFix()">Apply Scaling</button>
          </div>
        </details>

        <details id="mod-missing" class="module-card disabled-module">
          <summary>ğŸ©¹ Missing Values <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-missing" class="variable-config-container"></div>
            <button id="missing-apply-btn" class="secondary-btn" disabled onclick="runMissingFix()">Apply Imputation</button>
          </div>
        </details>

        <details id="mod-cleanup" class="module-card disabled-module">
          <summary>ğŸ§¹ Structural Cleanup <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-cleanup" class="variable-config-container"></div>
            <button id="cleanup-apply-btn" class="secondary-btn" disabled onclick="runCleanupFix()">Apply Cleanup</button>
          </div>
        </details>

        <details id="mod-encoding" class="module-card disabled-module">
          <summary>ğŸ”¢ Categorical Encoding <span class="badge"></span></summary>
          <div class="module-content">
            <div id="list-encoding" class="variable-config-container"></div>
            <button id="encoding-apply-btn" class="secondary-btn" disabled onclick="runEncodingFix()">Apply Encoding</button>
          </div>
        </details>
      </main>

      <footer>
        <div id="log-console">> System initialized.</div>
      </footer>
    </div>

    <?!= include('Scripts'); ?>
  </body>
</html>
